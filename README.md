# VIP 视频解析助手（Chrome 扩展 · Manifest V3）

一个简单、直观的 Chrome 扩展：在当前页面一键选择“解析接口”，并在新标签页用解析站点播放 VIP 视频。

> 仅供个人学习与研究，请确保符合目标网站服务条款与当地法律法规。

---

## 功能特点
- 一键解析：弹窗选择接口 → 点击“解析播放” → 新标签页打开解析地址
- 命名接口：支持给解析接口起易读名字（如“虾米解析”“冰豆解析”）
- 右键菜单：在页面或链接上右键 → “用其他接口播放”
- 可配置：在“选项”页面增删改解析接口与匹配站点
- 兼容性：默认“在新标签页打开”，规避 CSP/跨域限制

---

## 安装（开发者模式）
1. 打开 Chrome，访问 `chrome://extensions`。
2. 开启右上角“开发者模式”。
3. 点击“加载已解压的扩展程序”，选择本项目目录：
   - `/Users/{user}/Documents/VIP视频解析Chrome插件`

> 以后修改了代码或图标，回到扩展页面点击“重新加载”即可。

---

## 快速上手
1. 打开一个视频页面（如 `https://v.qq.com/…`）。
2. 点击工具栏图标，弹出扩窗：
   - 下拉框选择解析接口（默认已内置：虾米解析、冰豆解析）。
   - 点击“解析播放”。
3. 新标签页会打开解析站点并自动携带当前视频地址。

示例（你提供的链接）：
- 虾米解析：
  - 解析前缀：`https://jx.xmflv.com/?url=`
  - 完整示例：
    ```
    https://jx.xmflv.com/?url=https://v.qq.com/x/cover/mzc00200pn9oay5/d4101psldo0.html?ptag=11972
    ```
- 冰豆解析：
  - 解析前缀：`https://player.bingdou.vip/?url=`
  - 完整示例（目标地址需 URL 编码）：
    ```
    https://player.bingdou.vip/?url=https%3A%2F%2Fv.qq.com%2Fx%2Fcover%2Fmzc00200pn9oay5%2Fd4101psldo0.html%3Fptag%3D11972
    ```

> 扩展会自动对目标 URL 执行 `encodeURIComponent` 一次，无需手工重复编码。

---

## 解析接口配置
打开扩展“选项”页面（弹窗右下角“管理解析接口…”）：
- 添加接口：填写“URL 前缀”（建议以 `?url=` 结尾），名称可任意。
- 编辑/排序：修改名称或 URL，右键菜单会自动同步。
- 默认/最近使用：扩展会记住最近一次使用的接口；你也可在选项页设置默认接口。

初始内置接口：
- 虾米解析：`https://jx.xmflv.com/?url=`
- 冰豆解析：`https://player.bingdou.vip/?url=`

---

## 右键菜单用法
- 在页面空白处右键 → “解析播放（默认接口）”。
- 在链接上右键 → “用其他接口播放” → 选择接口（优先使用该链接的 URL）。

---

## 权限说明
- `activeTab`：读取当前标签页 URL（仅在用户交互后）
- `tabs`：在新标签页打开解析地址
- `storage`：保存你的接口与站点设置
- `contextMenus`：右键菜单入口
- `scripting`：在个别情况下回退读取页面 `location.href`

> 未请求主站点可见性权限，手动触发即可使用。

---

## 常见问题（FAQ）
- 点击后没反应？
  - 确认当前页面是 `http(s)` 协议（`chrome://`、`about:blank` 等属于系统页，无法解析）。
  - 在 `chrome://extensions` 里“重新加载”扩展后重试。
- 解析页打不开/视频无法播放？
  - 可能该解析站点临时不可用或策略变更；在“选项”中切换或添加其他接口试试。
- 右键菜单不显示接口名称？
  - 修改过接口后，会自动刷新菜单；若未更新，尝试关闭并重新打开浏览器或手动“重新加载”扩展。

---

## 版本与变更
- v0.1.0
  - 弹窗：下拉选择接口 + 一键解析
  - 选项：命名接口、增删改与测试
  - 右键菜单：默认解析 + 其他接口子菜单
  - Logo：金色方形 + 播放三角 + VIP 胶囊徽标

---

## 声明
本项目不提供任何视频内容，仅通过你配置的第三方解析站点在新标签页中打开对应地址。请自行评估和承担使用第三方服务可能带来的风险。

